
# Mysql

>索引本质是排好序的数据结构

## 1. 索引

### 1.1 hash

定义：散列表（Hash table，也叫哈希表），是根据关键码值(Key value)而直接进行访问的数据结构。也就是说，它通过把关键码值映射到表中一个位置来访问记录，以加快查找的速度。这个映射函数叫做散列函数，存放记录的数组叫做散列表。 对目标值进行hash运算得到hash值和数据磁盘指针地址保存到hash表，这样就达到快速定位数据位置。

缺点：精确查找十分快速，但范围查找就碰壁了。


### 1.1 BTree

定义：一个节点可以存储多个数据，这样可以避免黑红树的缺点，树的层数很变小。

缺点：  节点里面数组数据：每个数据的结构=索引数据+数据记录（即叶子节点存储键值和数据记录）

![](../../images/share/database/mysql/btree.png)

### 1.2 B+Tree

定义：B+Tree是在B-Tree基础上的一种优化。`节点里面数组数据：每个数据只存储键信息`，这样不存数据可以腾出空间放更多的键信息，让树层数越小
   - 非叶子节点只存储键信息。
   - `所有叶子节点之间都有一个链指针`
   - 数据记录都存放在叶子节点中

![](../../images/share/database/mysql/b+tree.png)

### 1.3 为什么用整型自增作为索引比较好。而UUID作为索引效率比较低
   - 索引存储在磁盘，而且树的每个节点分配的空间有大小。整型占空间比较小，这样可以存放多个键值。反之然后UUID占空间比较大
   - 整型比较方便，UUID比较需要先转成ASCII在进行比较，`顺序往后插入提升速度`


最左前缀

myisam数据索引分离 innodb在一起
 
局部性原理 4kb 一页

行溢出65535，数据长度限制


## 2. 索引优化

## 3. 事务

## 4. 锁

